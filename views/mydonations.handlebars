<h1 id="page-title">My Donations</h1>

{{#if successMessage}}
  <div class="popup-message" role="status" aria-live="polite">
    <p>{{successMessage}}</p>
  </div>
{{/if}}

<h2 class="donation-title" id="donation-title-{{@index}}">{{this.title}}</h2>
<section id="my-donations" class="section" aria-labelledby="page-title">
  <div class="donations-list">
    {{#each donations}}
    <article class="donation-card" role="region" aria-labelledby="donation-title-{{@index}}" tabindex="0"
      data-id="{{this._id}}" 
      data-title="{{this.title}}" 
      data-description="{{this.description}}" 
      data-category="{{this.category}}" 
      data-location="{{this.pickupLocation}}" 
      data-date="{{this.publishedDate}}" 
      data-available="{{this.available}}" 
      data-image="http://localhost:3000/{{this.image}}">
      
      <div class="donation-image-container">
        {{#if this.image}}
          <img src="http://localhost:3000/{{this.image}}" alt="Image of {{this.title}}" class="donation-image">
        {{/if}}
      </div>
      
      <div class="donation-details">
        <div class="item-name">
          <h3 id="donation-title-{{@index}}">{{this.title}}</h3>
        </div>
        <div class="description">
          <p><strong>Description:</strong> {{this.description}}</p>
        </div>
        <div class="category">
          <p><strong>Category:</strong> {{this.category}}</p>
        </div>
        <div class="location">
          <p><strong>Location:</strong> {{this.pickupLocation}}</p>
        </div>
        <div class="available">
          <p><strong>Availability:</strong> {{this.available}}</p>
        </div>
        <div class="published">
          <p><strong>Published:</strong> {{this.publishedDate}}</p>
        </div>
      </div>
      
      <div class="donation-actions">
        <form action="/updatedonations-form/{{this._id}}" method="GET" style="display:inline;">
          <button type="submit" class="update-btn" aria-label="Update donation titled {{this.title}}">Update</button>
        </form>
        <form action="/deletedonation/{{this._id}}/delete" method="POST" style="display:inline;" onsubmit="return confirm('Are you sure you want to delete this item?');">
          <button type="submit" class="delete-btn" aria-label="Delete donation titled {{this.title}}">Delete</button>
        </form>
      </div>
    </article>
    {{/each}}
  </div>
</section>
